<section data-topic="foundations" data-menu-title="Unit safe math">
  <h4>Unit safe <mark>calculations</mark></h4>
  <small balance
    >Attribute values remain typed, so we can feed <code>calc()</code>, <code>min()</code>, <code>max()</code>, or <code>clamp()</code> without guessing units. No more string parsing to draw the
    temporal track.</small
  >
</section>
<section data-topic="foundations" data-menu-title="Unit safe math">
  <comparison>
    <left>
      <article class="code-stack">
        <pre>
          <code data-trim data-line-numbers class="hljs css">
          .timeline-console {
            --track-progress: calc(
              (attr(data-stop number, 1955) - 1955) * 1.666%
            );
          }

          .timeline-marker {
            transform: translateX(var(--track-progress));
          }
        </code></pre>
        <pre>
          <code data-trim data-line-numbers class="hljs html">
          &lt;div
            class="timeline-console"
            data-stop="1985"
            data-departure="1985"&gt;
            ...
          &lt;/div&gt;
        </code></pre>
      </article>
    </left>
    <right>
      <small>
        <article class="demo-panel timeline-console" id="demo-unit-safe" data-era="past" data-stop="1985" data-departure="1985" style="--timeline-offset: 49.8%">
          <header>
            <span>Temporal track</span>
            <output data-live-value-target="#demo-unit-safe" data-live-value="data-stop" data-live-format="year"></output>
          </header>
          <div class="timeline-track" aria-hidden="true">
            <div class="timeline-marker"></div>
          </div>
          <footer>
            <span>1955</span>
            <span>2015</span>
          </footer>
        </article>
      </small>
      <div class="control-row">
        <button
          type="button"
          data-attr-target="#demo-unit-safe"
          data-attr-name="data-stop"
          data-attr-value="1955"
          data-attr-style-var="--timeline-offset"
          data-attr-group="timeline-demo"
          aria-pressed="false"
        >
          1955
        </button>
        <button
          type="button"
          data-attr-target="#demo-unit-safe"
          data-attr-name="data-stop"
          data-attr-value="1985"
          data-attr-style-var="--timeline-offset"
          data-attr-group="timeline-demo"
          aria-pressed="true"
        >
          1985
        </button>
        <button
          type="button"
          data-attr-target="#demo-unit-safe"
          data-attr-name="data-stop"
          data-attr-value="2015"
          data-attr-style-var="--timeline-offset"
          data-attr-group="timeline-demo"
          aria-pressed="false"
        >
          2015
        </button>
      </div>
    </right>
  </comparison>
  <aside class="notes">Highlight that math functions receive already typed numbers, so there is no manual parsing to align decades on the track.</aside>
</section>
