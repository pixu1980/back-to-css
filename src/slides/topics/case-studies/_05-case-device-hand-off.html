<section data-topic="case-studies" data-menu-title="Device hand-off">
  <h4>Case: Device hand-off synced with attributes</h4>
  <small balance>We mirrored attributes between mobile and wall displays via BroadcastChannel. CSS handled the visuals.</small>
</section>
<section data-topic="case-studies" data-menu-title="Device hand-off">
  <comparison>
    <left>
      <article class="code-stack">
        <pre>
          <code data-trim data-line-numbers class="hljs js">
            const channel = new BroadcastChannel('timeline');

            channel.onmessage = ({ data }) => {
              document.querySelectorAll('[data-sync="timeline"]').forEach((node) => {
                node.setAttribute('data-stop', data.stop);
              });
            };
          </code>
        </pre>
        <pre>
          <code data-trim data-line-numbers class="hljs css">
            [data-sync='timeline'] .timeline-marker {
              transform: translateX(timeline-offset(attr(data-stop number)));
            }
          </code>
        </pre>
      </article>
    </left>
    <right>
      <small>
        <article class="demo-panel timeline-console" id="demo-case-device" data-sync="timeline" data-stop="1985">
          <header>
            <span>Wall display</span>
            <output data-live-value-target="#demo-case-device" data-live-value="data-stop" data-live-format="year"></output>
          </header>
          <div class="timeline-track" aria-hidden="true">
            <div class="timeline-marker"></div>
          </div>
          <footer>
            <span>1955</span>
            <span>2015</span>
          </footer>
        </article>
      </small>
      <div class="control-row">
        <input type="range" min="1955" max="2015" value="1985" step="5" data-attr-slider-target="#demo-case-device" data-attr-name="data-stop" aria-label="Broadcast year" />
      </div>
    </right>
  </comparison>
  <aside class="notes">Mobile UI simply called <code>channel.postMessage({stop})</code>. Everything else was CSS.</aside>
</section>
