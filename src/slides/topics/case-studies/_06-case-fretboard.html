<!-- Fretboard demo: typed attr() creates a musical chord diagram -->
<section class="slide slide--demo" data-background-color="var(--btf-gray-dark)">
  <h3>Case Study: Fretboard</h3>
  <p balance>Custom elements + typed attr() = dynamic chord diagrams</p>

  <comparison>
    <left style="place-content: center; place-items: center">
      <fret-board-wrapper>
        <fret-board frets="4" strings="6" chord="E Major" theme="blue">
          <string-note string="6" open></string-note>
          <string-note string="5" fret="2" finger="2"></string-note>
          <string-note string="4" fret="2" finger="3"></string-note>
          <string-note string="3" fret="1" finger="1"></string-note>
          <string-note string="2" open></string-note>
          <string-note string="1" open></string-note>
        </fret-board>
      </fret-board-wrapper>
    </left>
    <right>
      <pre>
        <code data-trim data-line-numbers class="hljs html">
          &lt;fret-board frets="4" strings="6" chord="E Major"&gt;
            &lt;string-note string="6" open&gt;&lt;/string-note&gt;
            &lt;string-note string="5" fret="2" finger="2"&gt;&lt;/string-note&gt;
            &lt;string-note string="4" fret="2" finger="3"&gt;&lt;/string-note&gt;
            &lt;string-note string="3" fret="1" finger="1"&gt;&lt;/string-note&gt;
            &lt;string-note string="2" open&gt;&lt;/string-note&gt;
            &lt;string-note string="1" open&gt;&lt;/string-note&gt;
          &lt;/fret-board&gt;
        </code>
      </pre>
    </right>
  </comparison>

  <aside class="notes">
    The fretboard is entirely CSS driven: - Grid layout adapts to frets/strings attributes - Note positions calculated via typed attr() - No JavaScript required for rendering - Theme variations
    through custom properties
  </aside>
</section>

<!-- Fretboard: CSS breakdown -->
<section class="slide slide--code" data-background-color="var(--btf-gray-dark)">
  <h3>Fretboard CSS: Typed attr() Magic</h3>
  <comparison>
    <left>
      <h5>Grid from Attributes</h5>
      <pre>
        <code data-trim data-line-numbers class="hljs css">
          /* fret board definition */
          fret-board {
            --fb--frets: 
              attr(frets integer, 4);
              
            --fb--strings: 
              attr(strings integer, 6);

            display: grid;
            grid-template-columns: repeat(var(--fb--frets), 1fr);
            grid-template-rows: repeat(var(--fb--strings), 1fr);
          }
        </code>
      </pre>
    </left>
    <right>
      <h5>Note Positioning</h5>
      <pre>
        <code data-trim data-line-numbers class="hljs css">
          /* single note position CSS */
          string-note {
            --fb--fret: 
              attr(fret integer, 0);
              
            --fb--string: 
              attr(string integer, 0);

            grid-column: var(--fb--fret);
            grid-row: var(--fb--string);
            /* this sets the note positions */
          }
        </code>
      </pre>
    </right>
  </comparison>
  <aside class="notes">
    Key typed attr() patterns: - type(&lt;number&gt;) ensures numeric grid calculations - Fallback values (4, 6, 0) prevent layout breaks - Custom properties cache attr() results for reuse
  </aside>
</section>

<!-- Fretboard: interactive variations -->
<section class="slide slide--demo" data-background-color="var(--btf-gray-dark)">
  <h2>Fretboard Variations</h2>
  <p>Change attributes, watch it adapt</p>
  <fret-board-wrapper style="margin-block-start: 2rem">
    <fret-board frets="4" strings="6" chord="A Major" theme="amber">
      <string-note string="6" mute></string-note>
      <string-note string="5" open></string-note>
      <string-note string="4" fret="2" finger="1"></string-note>
      <string-note string="3" fret="2" finger="2"></string-note>
      <string-note string="2" fret="2" finger="3"></string-note>
      <string-note string="1" open></string-note>
    </fret-board>
    <fret-board frets="4" strings="6" chord="D Major" theme="rose">
      <string-note string="6" mute></string-note>
      <string-note string="5" mute></string-note>
      <string-note string="4" open></string-note>
      <string-note string="3" fret="2" finger="1"></string-note>
      <string-note string="2" fret="3" finger="3"></string-note>
      <string-note string="1" fret="2" finger="2"></string-note>
    </fret-board>
    <fret-board frets="5" strings="6" chord="F Major" barre="1" theme="green">
      <string-note string="6" fret="1" barre="6" finger="1"></string-note>
      <string-note string="3" fret="2" finger="2"></string-note>
      <string-note string="5" fret="3" finger="3"></string-note>
      <string-note string="4" fret="3" finger="4"></string-note>
    </fret-board>
    <fret-board frets="4" strings="6" chord="E7sus4" theme="teal">
      <string-note string="6" open></string-note>
      <string-note string="5" fret="2" finger="2"></string-note>
      <string-note string="4" fret="2" finger="3"></string-note>
      <string-note string="3" fret="2" finger="4"></string-note>
      <string-note string="2" barre="2" string="2" fret="3" finger="1"></string-note>
      <string-note string="1" open></string-note>
      <ol>
        <li value="7"></li>
      </ol>
    </fret-board>
  </fret-board-wrapper>
  <aside class="notes">Same component, different attributes: - Open chords vs barre chords - Muted strings marked without finger numbers - Grid adjusts to fret count automatically</aside>
</section>
