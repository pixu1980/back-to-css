<section data-topic="systems" data-menu-title="JS sync">
  <h4>JavaScript only syncs attributes</h4>
  <small balance>Minimal scripts observe state and mirror it across components. CSS handles presentation and branching.</small>
</section>
<section data-topic="systems" data-menu-title="JS sync">
  <comparison>
    <left>
      <article class="code-stack">
        <pre>
        <code data-trim data-line-numbers class="hljs js">const doc = document.documentElement;
const flux = document.querySelector('#flux-sync');

doc.addEventListener('pointermove', (event) => {
  const ratio = event.clientX / window.innerWidth;
  const speed = Math.round(60 + ratio * 40);
  flux.setAttribute('data-speed', speed);
});</code></pre>
        <pre>
        <code data-trim data-line-numbers class="hljs css">#flux-sync {
  --flux-speed: attr(data-speed number, 60);
  --flux-energy: if(attr(data-speed number) &gt;= 88, 1.8, 0.8);
}

#flux-sync .status::after {
  content: if(attr(data-speed number) &gt;= 88, 'Time jump!', 'Cruising');
}</code></pre>
      </article>
    </left>
    <right>
      <small>
        <article class="demo-panel flux-panel" id="demo-systems-js" data-speed="64" data-energy="0.8" data-era="past">
          <div class="flux-radial" data-label="sync"></div>
          <p class="status">Move the pointer to change speed. JS writes, CSS reacts.</p>
        </article>
      </small>
      <div class="control-row">
        <input type="range" min="55" max="110" value="64" data-attr-slider-target="#demo-systems-js" data-attr-name="data-speed" aria-label="Speed override" />
      </div>
    </right>
  </comparison>
  <aside class="notes">Great progressive enhancement story: JS absent? Widget keeps last known state.</aside>
</section>
