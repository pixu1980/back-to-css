<section data-topic="functions" data-menu-title="Sharing logic">
  <h4>Ship @function libraries like tokens</h4>
  <small balance>Store helpers in a dedicated stylesheet, import them everywhere, and keep HTML attributes as the only inputs to the logic layer.</small>
</section>
<section data-topic="functions" data-menu-title="Sharing logic">
  <comparison>
    <left>
      <article class="code-stack">
        <pre>
        <code data-trim data-line-numbers class="hljs css">
          @layer logic {
            @function normalize-speed($speed) {
              @return clamp(0, ($speed - 60) / 28, 1);
            }
          }

          .flux-readout {
            --intensity: normalize-speed(attr(data-speed number, 55));
          }
        </code>
      </pre>
        <p>Think of this file as <em>logic tokens</em>. Teams can version them exactly like design tokens.</p>
      </article>
    </left>
    <right>
      <small>
        <article class="demo-panel" id="demo-function-share" data-speed="55">
          <header>
            <span>Logic tokens</span>
            <output data-live-value-target="#demo-function-share" data-live-value="data-speed" data-live-format="mph"></output>
          </header>
          <div class="logic-leds" aria-hidden="true">
            <span style="--index: 1"></span>
            <span style="--index: 2"></span>
            <span style="--index: 3"></span>
            <span style="--index: 4"></span>
            <span style="--index: 5"></span>
          </div>
          <p class="status">Each LED taps the same helper. No duplicated math, just attributes.</p>
        </article>
      </small>
      <div class="control-row">
        <input type="range" min="40" max="110" value="55" data-attr-slider-target="#demo-function-share" data-attr-name="data-speed" aria-label="Adjust speed" />
      </div>
    </right>
  </comparison>
  <aside class="notes">Ship helpers in a logic layer, import once, and treat them as API contracts.</aside>
</section>
