<section data-topic="functions" data-menu-title="Math chains">
  <h4>Chain <mark>@function</mark> with math</h4>
  <small balance>Compose helpers so one returns a normalized ratio while another converts it into an angle. CSS becomes the geometry engine powering the time circuits.</small>
</section>
<section data-topic="functions" data-menu-title="Math chains">
  <comparison>
    <left>
      <article class="code-stack">
        <pre>
          <code data-trim data-line-numbers class="hljs css">
          @function normalize-speed($speed) {
            @return clamp(0, $speed / 88, 1);
          }

          @function to-angle($ratio) {
            @return calc($ratio * 360deg);
          }
        </code></pre>
        <pre>
          <code data-trim data-line-numbers class="hljs css">
          .flux-panel .flux-radial {
            rotate: to-angle(normalize-speed(attr(data-speed number, 0)));
          }
        </code></pre>
      </article>
    </left>
    <right>
      <small>
        <article class="demo-panel flux-panel" id="demo-function-math" data-era="future" data-speed="44" data-energy="0.9" style="--flux-speed: 44; --flux-energy: 0.9">
          <header>
            <span>Chained helpers</span>
            <output data-live-value-target="#demo-function-math" data-live-value="data-speed" data-live-format="mph"></output>
          </header>
          <div class="flux-radial" data-label="chain"></div>
          <p class="status">Ratio + angle helpers keep math readable.</p>
        </article>
      </small>
      <div class="control-row">
        <label>
          Speed
          <input type="range" min="0" max="100" step="1" value="44" data-attr-slider-target="#demo-function-math" data-attr-name="data-speed" data-attr-style-var="--flux-speed" />
        </label>
      </div>
    </right>
  </comparison>
  <aside class="notes">Every helper does one job, so the cascade reads like a geometry notebook.</aside>
</section>
